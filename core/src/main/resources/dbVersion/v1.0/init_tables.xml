<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                                       http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.6.xsd"
                   logicalFilePath="dictionary-v1.0-init_tables">

    <changeSet id="createEmployeeTable" author="a.kartashov">
        <sql>
            CREATE TABLE employee (
            id INT PRIMARY KEY AUTO_INCREMENT,
            surname VARCHAR(64) NOT NULL,
            name VARCHAR(64) NOT NULL,
            patronymic VARCHAR(64),
            phone INT
            );
        </sql>
        <rollback>
            DROP TABLE employee;
        </rollback>
    </changeSet>

    <changeSet id="createEmployeeAddressTable" author="a.kartashov">
        <sql>
            CREATE TABLE employee_address (
            id INT PRIMARY KEY AUTO_INCREMENT,
            employee_id INT NOT NULL,
            postcode VARCHAR(64),
            city VARCHAR(64) NOT NULL,
            street VARCHAR(64) NOT NULL,
            house VARCHAR(64) NOT NULL,
            apartment VARCHAR(64),
            FOREIGN KEY (employee_id)  REFERENCES employee (id)
            );
        </sql>
        <rollback>
            DROP TABLE employee_address;
        </rollback>
    </changeSet>

    <changeSet id="initEmployeeTable" author="a.kartashov">
        <sql>
            INSERT INTO employee (surname, name, patronymic, phone)
            VALUES ('Иванов', 'Иван', 'Иванович', 777777777);
            INSERT INTO employee (surname, name, patronymic, phone)
            VALUES ('Петров', 'Петр', 'Петрович', null);
        </sql>
        <rollback>
            DELETE FROM employee;
        </rollback>
    </changeSet>

    <changeSet id="initEmployeeAddressTable" author="a.kartashov">
        <sql>
            INSERT INTO employee_address (employee_id, postcode, city, street, house, apartment)
            VALUES (1, '43555', 'Moscow', 'Arbat', '45', '110');
            INSERT INTO employee_address (employee_id, postcode, city, street, house, apartment)
            VALUES (1, '45895', 'Samara', 'SamaraStreet', '40', null);
            INSERT INTO employee_address (employee_id, postcode, city, street, house, apartment)
            VALUES (2, '45621', 'Saratov', 'SaratovStreet', '10', '55');
        </sql>
        <rollback>
            DELETE FROM employee_address;
        </rollback>
    </changeSet>


</databaseChangeLog>